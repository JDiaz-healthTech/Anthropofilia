Mejoras para la base de datos y código PHP
-- Evita duplicados de categorías
ALTER TABLE categorias
  ADD UNIQUE KEY uniq_nombre_categoria (nombre_categoria);

-- Evita carreras/duplicados de nombres de etiqueta
ALTER TABLE etiquetas
  ADD UNIQUE KEY uniq_nombre_etiqueta (nombre_etiqueta);

-- Evita duplicar el mismo vínculo post-etiqueta
ALTER TABLE post_etiquetas
  ADD UNIQUE KEY uniq_post_tag (id_post, id_etiqueta);

-- Si puedo usar MySQL 8, haz que el campo sea case- y acento-insensible para evitar “Salud” vs “salúd” vs “salud” como nombres distintos.
  ALTER TABLE categorias
  MODIFY nombre_categoria VARCHAR(191)
  CHARACTER SET utf8mb4
  COLLATE utf8mb4_0900_ai_ci
  NOT NULL;


-- Evita duplicados de posts por título y usuario
ALTER TABLE posts
  ADD UNIQUE KEY uniq_titulo_usuario (titulo, id_usuario);


ALTER TABLE paginas 
  MODIFY slug VARCHAR(191) NOT NULL,
  ADD UNIQUE KEY uniq_paginas_slug (slug);

-- Si usas timestamp de actualización:
ALTER TABLE paginas 
  ADD COLUMN actualizado_en TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP;

  ALTER TABLE posts
  ADD COLUMN actualizado_en TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP;
  SET titulo=?, contenido=?, id_categoria=?, imagen_destacada_url=?, actualizado_en=NOW()


CREATE INDEX idx_posts_fecha_publicacion ON posts (fecha_publicacion);

ALTER TABLE categorias ADD UNIQUE KEY uniq_categorias_slug (slug);
CREATE INDEX idx_posts_cat_fecha ON posts (id_categoria, fecha_publicacion);

